<form>
  {{#unless (eq noteType "handout")}}
    <div class="form-group">
      <label for="text">Note Text:</label>
      <textarea name="text" rows="4">{{text}}</textarea>
    </div>

    {{!-- Font Settings --}}
    <div class="form-group font-settings">
      <div class="font-select-group">
        <label for="font">Font:</label>
        <select name="font">
          <option value="Rock Salt" {{#if (eq font "Rock Salt")}}selected{{/if}}>Rock Salt</option>
          <option value="Courier New" {{#if (eq font "Courier New")}}selected{{/if}}>Courier New</option>
          <option value="Times New Roman" {{#if (eq font "Times New Roman")}}selected{{/if}}>Times New Roman</option>
          <option value="Signika" {{#if (eq font "Signika")}}selected{{/if}}>Signika</option>
          <option value="Arial" {{#if (eq font "Arial")}}selected{{/if}}>Arial</option>
        </select>
      </div>
      <div class="font-size-group">
        <label for="fontSize">Font Size:</label>
        <input type="number" name="fontSize" value="{{fontSize}}" min="8" max="48" step="1" />
      </div>
    </div>
  {{/unless}}

  {{!-- Show Image Path field for photo notes and handouts --}}
  {{#if (or (eq noteType "photo") (eq noteType "handout"))}}
    <div class="form-group" style="display: block;">
      <label for="image">Image Path:</label>
      <div class="file-picker">
        <input type="text" name="image" value="{{image}}" placeholder="Enter image path" readonly />
        <button type="button" class="file-picker-button">
          <i class="fas fa-folder-open"></i> Browse
        </button>
      </div>
    </div>
  {{else}}
    <div class="form-group" style="display: none;"></div>
  {{/if}}


  {{!-- If boardMode is futuristic and noteType is photo, show the extra Identity Name field --}}
  {{#if (eq noteType "photo")}}
    {{#if (eq boardMode "futuristic")}}
      <div class="form-group" style="display: block;">
        <label for="identityName">Identity Name:</label>
        <input type="text" name="identityName" value="{{identityName}}" placeholder="Enter identity name" />
      </div>
    {{/if}}
  {{/if}}

  {{!-- Connections Section --}}
  {{#if connections.length}}
    <div class="form-group connections-section">
      <label class="connections-header">Connections from this note:</label>
      <div class="connections-list">
        {{#each connections}}
          <div class="connection-item" data-index="{{@index}}">
            <span class="connection-target">{{this.displayNumber}}: {{this.targetLabel}}</span>
            <div class="connection-controls">
              <input type="color" name="connection-color-{{@index}}" value="{{this.color}}" title="Change yarn color" />
              <button type="button" class="remove-connection-btn" data-index="{{@index}}" title="Remove connection">
                <i class="fas fa-unlink"></i>
              </button>
            </div>
          </div>
        {{/each}}
      </div>
    </div>
  {{/if}}

  <div class="form-group button-group">
    <button type="submit" class="save-button">
      <i class="fas fa-save"></i> Save
    </button>
    <button type="button" class="cancel-button">
      <i class="fas fa-times"></i> Cancel
    </button>
  </div>
</form>
